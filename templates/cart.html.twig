<html lang="en">

<head>
    <meta charset="UTF-8">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 128 128%22><text y=%221.2em%22 font-size=%2296%22>⚫️</text></svg>">
    <title>Votre Panier</title>
    {% block javascripts %}
        {% block importmap %}
            {{ importmap('app') }}
        {% endblock %}
    {% endblock %}
</head>

{% include 'navbar.html.twig' %}

{% block body %}
    <div class="container mt-5">
        <h1 class="mb-4">Votre Panier</h1>

        {% if cartItems is not empty %}
            <div class="list-group">
                {% for articleId, item in cartItems %}
                    <div class="list-group-item d-flex justify-content-between align-items-center">
                        <div>
                            <img src="{{ path('article_image', {'id': articleId}) }}" class="card-img-top" alt="{{item.article.nom }}">
                            <h5>{{ item.article.nom }}</h5>
                            <p>{{ item.quantity }} x {{ item.article.prix }}€</p>
                        </div>
                        
                        <div class="btn-group" role="group">
                            <form action="{{ path('cart_add', {'id': articleId}) }}" method="post">
                                <button type="submit" class="btn btn-sm btn-primary">Ajouter</button>
                            </form>
                            <form action="{{ path('cart_remove', {'id': articleId}) }}" method="post">
                                <button type="submit" class="btn btn-sm btn-danger">Supprimer</button>
                            </form>
                        </div>
                    </div>
                {% endfor %}
            </div>

            <div class="mt-4 text-end">
                <h3>Total: <span class="text-success">{{ total }}€</span></h3>
            </div>

            <div class="mt-3 text-end">
                <a href="{{ path('validate') }}" class="btn btn-warning">Valider</a>
            </div>
        {% else %}
            <div class="alert alert-warning" role="alert">
                Votre panier est vide.
            </div>
        {% endif %}
    </div>
{% endblock %}

</html>
